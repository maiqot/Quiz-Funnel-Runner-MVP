# Quiz Funnel Runner

CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è quiz-–≤–æ—Ä–æ–Ω–æ–∫ –≤ –º–æ–±–∏–ª—å–Ω–æ–π —ç–º—É–ª—è—Ü–∏–∏ (**iPhone 13**) —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏ –∏ –¥–µ—Ç–µ–∫—Ü–∏–µ–π paywall.

---

## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

* [üß± Tech Stack](#-tech-stack)
* [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
* [‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫](#-–∑–∞–ø—É—Å–∫)
* [üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–∏—Ö —Å—Å—ã–ª–æ–∫](#-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Å–≤–æ–∏—Ö-—Å—Å—ã–ª–æ–∫)
* [üìÇ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã](#-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
* [üîç Quick Verification](#-quick-verification)
* [üß† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç](#-—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
* [‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏](#Ô∏è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
* [üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
* [üéØ –ü–æ–¥—Ö–æ–¥ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ](#-–ø–æ–¥—Ö–æ–¥-–∏-–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)
* [üß™ –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏—è](#-–∫–∞—á–µ—Å—Ç–≤–æ-—Ä–µ—à–µ–Ω–∏—è)
* [üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è](#-–≤–æ–∑–º–æ–∂–Ω—ã–µ-—É–ª—É—á—à–µ–Ω–∏—è)

---

## üß± Tech Stack

* **Node.js**
* **TypeScript**
* **Playwright**
* Mobile emulation: **iPhone 13**
* CLI execution (Terminal / VS Code / Cursor / WebStorm)

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone https://github.com/maiqot/Quiz-Funnel-Runner-MVP.git
cd Quiz-Funnel-Runner-MVP
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
npx playwright install
```

–°–∫–∞—á–∏–≤–∞—é—Ç—Å—è:

* **Chromium** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
* **WebKit (Safari)** ‚Äî –¥–ª—è `--safari`

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫

```bash
npm run dev
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ:

```
results/
```

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### Chromium (headless)

```bash
npm run dev
```

### –° –æ–∫–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–∞

```bash
npm run dev -- https://coursiv.io/dynamic --headful
```

### Safari (WebKit)

```bash
npm run dev -- https://coursiv.io/dynamic --safari --headful
```

–í–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–±–∏–ª—å–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è **iPhone 13**.

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–∏—Ö —Å—Å—ã–ª–æ–∫

### –ß–µ—Ä–µ–∑ CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û–¥–∏–Ω URL:

```bash
npm run dev -- https://coursiv.io/dynamic
```

–ù–µ—Å–∫–æ–ª—å–∫–æ URL:

```bash
npm run dev -- https://coursiv.io/dynamic?prc_id=1069 https://dance-bit.com/welcomeBellyRef
```

CLI-URL –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `src/config.ts`.

### –ß–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:

```
src/config.ts
```

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üìÇ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–æ –≤–æ—Ä–æ–Ω–∫–∞–º

```
results/<funnel-slug>/
  01_question.png
  02_input.png
  ...
  summary.json
  log.txt
```

### –ü–æ —Ç–∏–ø–∞–º —ç–∫—Ä–∞–Ω–æ–≤

```
results/_classified/question/
results/_classified/input/
results/_classified/email/
results/_classified/paywall/
results/_classified/info/
results/_classified/other/
```

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üîç Quick Verification

### –ß–∏—Å—Ç—ã–π –∑–∞–ø—É—Å–∫

```bash
rm -rf results
npm run dev -- https://coursiv.io/dynamic --headful
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ paywall

```bash
grep -Ri "paywall detected" results/*/log.txt
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
ls results
cat results/summary.json
ls results/_classified/paywall
```

–û–∂–∏–¥–∞–µ–º–æ:

* –µ—Å—Ç—å `_classified`
* –µ—Å—Ç—å `summary.json`
* –µ—Å—Ç—å paywall PNG
* `funnelsReachedPaywall: 1`

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üß† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

–î–ª—è –∫–∞–∂–¥–æ–≥–æ URL:

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –º–æ–±–∏–ª—å–Ω–æ–π —ç–º—É–ª—è—Ü–∏–∏
2. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —ç–∫—Ä–∞–Ω
3. –î–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç
4. –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è
5. –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥
6. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ paywall

–¢–∏–ø—ã —ç–∫—Ä–∞–Ω–æ–≤:

* `question`
* `input`
* `email`
* `info`
* `paywall`
* `other`

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `src/config.ts` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

* —Å–ø–∏—Å–æ–∫ URL
* –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —à–∞–≥–æ–≤
* –∑–∞—â–∏—Ç—É –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
* –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è input/email

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
  runner/       ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–º
  classifier/   ‚Äì –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —ç–∫—Ä–∞–Ω–∞
  navigator/    ‚Äì –¥–µ–π—Å—Ç–≤–∏—è –ø–æ —Ç–∏–ø—É
  utils/        ‚Äì –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
```

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üéØ –ü–æ–¥—Ö–æ–¥ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥—Ö–æ–¥

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Ü–∏–∫–ª:

1. –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (mobile emulation)
2. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
3. –°–∫—Ä–∏–Ω—à–æ—Ç
4. –î–µ–π—Å—Ç–≤–∏–µ
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞
6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ paywall

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

* –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º
* –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º
* –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º

---

### –ü–æ—á–µ–º—É TypeScript

* —Å—Ç—Ä–æ–≥–∏–π `ScreenType`
* state-machine –ª–æ–≥–∏–∫–∞
* –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
* —Å–Ω–∏–∂–µ–Ω–∏–µ runtime-–æ—à–∏–±–æ–∫

---

### –ü–æ—á–µ–º—É Playwright

* –º–æ–±–∏–ª—å–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è
* —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ SPA
* –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
* –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Chromium + WebKit

---

### –ü–æ—á–µ–º—É CLI

* –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI
* –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
* –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ UI-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üß™ –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏—è

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å

* –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
* retry –¥–µ–π—Å—Ç–≤–∏–π
* –æ–±—Ä–∞–±–æ—Ç–∫–∞ popups / cookies
* fallback submit –¥–ª—è email

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å

* –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏
* CLI-–∞—Ä–≥—É–º–µ–Ω—Ç—ã
* –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `summary.json`

### –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

* LLM fallback
* –º—É–ª—å—Ç–∏-—Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ—Ç–≤–µ—Ç–æ–≤
* —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
* A/B —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ç–æ–∫

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

* LLM-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
* —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ç–æ–∫ funnel
* HTML / PDF –æ—Ç—á—ë—Ç
* CI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
* –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≥–ª—É–±–∏–Ω—ã –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)

---
